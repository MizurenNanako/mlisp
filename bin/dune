(library
 (name common)
 (modules common))

(ocamllex lexer)

(library
 (name lexer)
 (modules lexer)
 (libraries lexical))

(library
 (name lexical)
 (modules lexical))

(library
 (name syntactics)
 (modules syntactics)
 (libraries common lexical))

(menhir
 (modules parser)
 (flags --external-tokens=Lexical.Token --table --dump))

(library
 (name parser)
 (modules parser)
 (libraries lexical syntactics menhirLib))

(library
 (name parse)
 (modules parse)
 (libraries lexical syntactics lexer parser))

(library
 (name typing)
 (modules typing)
 (preprocess
  (pps ppx_sexp_conv))
 (libraries syntactics sexplib))

(library
 (name semantics)
 (modules semantics)
 (libraries typing))

(executable
 (public_name mlisp)
 (name main)
 (modules main)
 (libraries lexical syntactics semantics parse))
